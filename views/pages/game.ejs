<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>

	<!-- <script src="intro/scripts.js"></script> -->
    <!-- <meta http-equiv="Refresh" content="30"> -->
	<!-- Including bootstrap -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
	 crossorigin="anonymous">

	<!-- Including my personal styles -->
    <link href="styles.css" rel="stylesheet" type="text/css">
    <% if (data) { %>
        <script>
           data = JSON.parse('<%- JSON.stringify(data) %>');
           alert("data is " + data);
        alert("data is " + data["gamename"]);
        </script>
     <% } %>
</head>

    <body id="gameboard" background="'. $row['tableimgpath'] . '">
            <h1>' . $row['gamename'] . '</h1>

        <img id="character' . $users['username'] . '" src="' . $row['imgpath'] . '" style="transform: translate3d(' . $row['posx'] . 'px,' . $row['posy'] . 'px, 0px)">
        <img id="character" src="' . $row['imgpath'] . '">
        <!-- <script> var character = '$javascriptcharacter' ; -->

        <!-- <button id="clearplayers" type="button" onclick="window.location.href='clear-characters.php\'"> Clear Players </button>'; -->
<script>
    // $.ajax({
    //        url: "https://pacific-reef-42179.herokuapp.com/getCurrentGame",
    //        type : "GET",
    //        success: function(data) {
    //         //    alert(JSON.stringify(data));
    //            for (var i = 0; i < data.length; i++)
    //             $('#listOfGames').append('<div> <input type="radio" name="games-selection-btn" class="gamesradio">' + data[i].gamename + '</div>')     
    //          },
    //         error: function(data) {
    //             alert('could not get the games');
    //             alert(data);
    //         }
    //     });




    var charactername = "#character" + character;
    var gameboard = document.querySelector("#gameboard");
    var character = document.querySelector(charactername);


    gameboard.addEventListener("click", getClickPosition, false);

    function getClickPosition(e) {
        var xPos = e.clientX - (character.offsetWidth / 2);
        var yPos = e.clientY - (character.offsetHeight / 2);;

        var translate3dValue = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
        
        var data = {
                x: xPos,
                y: yPos
            };

            $.post("updatecoordinates.php", data);

        character.style.transform = translate3dValue;
    }
</script>
</body>


</html>